(function(h,l,m,q){Foundation.libs.abide={name:"abide",version:"{{VERSION}}",settings:{live_validate:!0,validate_on_blur:!0,focus_on_invalid:!0,error_labels:!0,error_class:"error",timeout:1E3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,
url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,
domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,
day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(a,c,b){return m.getElementById(a.getAttribute(this.add_namespace("data-equalto"))).value===a.value}}},timer:null,init:function(a,c,b){this.bindings(c,b)},events:function(a){var c=this;a=c.S(a).attr("novalidate","novalidate");var b=a.data(this.attr_name(!0)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid");a.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",
function(a){var b=/ajax/i.test(c.S(this).attr(c.attr_name()));return c.validate(c.S(this).find("input, textarea, select").get(),a,b)}).on("reset",function(){return c.reset(h(this))}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(a){!0===b.validate_on_blur&&c.validate([this],a)}).on("keydown.fndtn.abide",function(a){!0===b.live_validate&&9!=a.which&&(clearTimeout(c.timer),c.timer=setTimeout(function(){c.validate([this],a)}.bind(this),b.timeout))})},
reset:function(a){a.removeAttr(this.invalid_attr);h(this.invalid_attr,a).removeAttr(this.invalid_attr);h("."+this.settings.error_class,a).not("small").removeClass(this.settings.error_class)},validate:function(a,c,b){var d=this.parse_patterns(a),e=d.length,f=this.S(a[0]).closest("form");c=/submit/.test(c.type);for(var g=0;g<e;g++)if(!d[g]&&(c||b))return this.settings.focus_on_invalid&&a[g].focus(),f.trigger("invalid").trigger("invalid.fndtn.abide"),this.S(a[g]).closest("form").attr(this.invalid_attr,
""),!1;(c||b)&&f.trigger("valid").trigger("valid.fndtn.abide");f.removeAttr(this.invalid_attr);return b?!1:!0},parse_patterns:function(a){for(var c=a.length,b=[];c--;)b.push(this.pattern(a[c]));return this.check_validation_and_apply_styles(b)},pattern:function(a){var c=a.getAttribute("type"),b="string"===typeof a.getAttribute("required"),d=a.getAttribute("pattern")||"";if(this.settings.patterns.hasOwnProperty(d)&&0<d.length)return[a,this.settings.patterns[d],b];if(0<d.length)return[a,new RegExp(d),
b];if(this.settings.patterns.hasOwnProperty(c))return[a,this.settings.patterns[c],b];d=/.*/;return[a,d,b]},check_validation_and_apply_styles:function(a){var c=a.length,b=[];for(this.S(a[0][0]).closest("[data-"+this.attr_name(!0)+"]").data(this.attr_name(!0)+"-init");c--;){var d=a[c][0],e=a[c][2],f=d.value.trim(),g=this.S(d).parent(),n=d.getAttribute(this.add_namespace("data-abide-validator")),l="radio"===d.type,m="checkbox"===d.type,p=this.S('label[for="'+d.getAttribute("id")+'"]'),q=e?0<d.value.length:
!0,k=[];d.getAttribute(this.add_namespace("data-equalto"))&&(n="equalTo");g=g.is("label")?g.parent():g;n&&(n=this.settings.validators[n].apply(this,[d,e,g]),k.push(n));l&&e?k.push(this.valid_radio(d,e)):m&&e?k.push(this.valid_checkbox(d,e)):(a[c][1].test(f)&&q||!e&&1>d.value.length||h(d).attr("disabled")?k.push(!0):k.push(!1),k=[k.every(function(a){return a})],k[0]?(this.S(d).removeAttr(this.invalid_attr),d.setAttribute("aria-invalid","false"),d.removeAttribute("aria-describedby"),g.removeClass(this.settings.error_class),
0<p.length&&this.settings.error_labels&&p.removeClass(this.settings.error_class).removeAttr("role"),h(d).triggerHandler("valid")):(this.S(d).attr(this.invalid_attr,""),d.setAttribute("aria-invalid","true"),e=g.find("small."+this.settings.error_class,"span."+this.settings.error_class),e=0<e.length?e[0].id:"",0<e.length&&d.setAttribute("aria-describedby",e),g.addClass(this.settings.error_class),0<p.length&&this.settings.error_labels&&p.addClass(this.settings.error_class).attr("role","alert"),h(d).triggerHandler("invalid")));
b.push(k[0])}return b=[b.every(function(a){return a})]},valid_checkbox:function(a,c){a=this.S(a);var b=a.is(":checked")||!c;b?a.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):a.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class);return b},valid_radio:function(a,c){for(var b=a.getAttribute("name"),b=this.S(a).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+b+"']"),d=b.length,e=!1,f=0;f<d;f++)b[f].checked&&(e=!0);for(f=0;f<d;f++)e?this.S(b[f]).removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):
this.S(b[f]).attr(this.invalid_attr,"").parent().addClass(this.settings.error_class);return e},valid_equal:function(a,c,b){(c=m.getElementById(a.getAttribute(this.add_namespace("data-equalto"))).value===a.value)?(this.S(a).removeAttr(this.invalid_attr),b.removeClass(this.settings.error_class),0<label.length&&settings.error_labels&&label.removeClass(this.settings.error_class)):(this.S(a).attr(this.invalid_attr,""),b.addClass(this.settings.error_class),0<label.length&&settings.error_labels&&label.addClass(this.settings.error_class));
return c},valid_oneof:function(a,c,b,d){a=this.S(a);c=this.S("["+this.add_namespace("data-oneof")+"]");(b=0<c.filter(":checked").length)?a.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):a.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class);if(!d){var e=this;c.each(function(){e.valid_oneof.call(e,this,null,null,!0)})}return b}}})(jQuery,window,window.document);var LoginModal=Backbone.View.extend({el:"#login-modal",button:null,events:{"valid form":"onFormValidated","opened.fndtn.reveal":"onModalOpened"},initialize:function(){this.button=this.$el.find(".loading-button")},onFormValidated:function(h){var l=this.$el.find(".alert-box");l.hide();this.button.addClass("loading");var m=this;$.ajax({url:"/api/astroprint/private-key",type:"POST",data:{email:this.$el.find("input[name=email]").val(),password:this.$el.find("input[name=password]").val()},success:function(){location.reload()},
error:function(h){503==h.status?l.text("Your device is not connected to AstroPrint.com").show():l.text("Invalid Email/Password").show();m.button.removeClass("loading")}})},onModalOpened:function(){this.$el.find("input[name='email']").focus()}}),loginModal=new LoginModal;
